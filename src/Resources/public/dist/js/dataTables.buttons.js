!function(e){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t=t||window,n&&n.fn.dataTable||(n=require("datatables.net")(t,n).$),e(n,t,t.document)}:e(jQuery,window,document)}(function(b,a,u,d){"use strict";function c(t,n){b.isArray(n=!0===n?{}:n)&&(n={buttons:n}),this.c=b.extend(!0,{},c.defaults,n),n.buttons&&(this.c.buttons=n.buttons),this.s={dt:new o.Api(t),buttons:[],subButtons:[],listenKeys:"",namespace:"dtb"+e++},this.dom={container:b("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()}var i,o=b.fn.dataTable,e=0,l=0,f=o.ext.buttons,p=(b.extend(c.prototype,{action:function(t,n){t=this._indexToButton(t).conf;return n===d?t.action:(t.action=n,this)},active:function(t,n){return this._indexToButton(t).node.toggleClass(this.c.dom.button.active,n===d||n),this},add:function(t,n){var e;return"string"==typeof t&&-1!==t.indexOf("-")?(e=t.split("-"),this.c.buttons[+e[0]].buttons.splice(+e[1],0,n)):this.c.buttons.splice(+t,0,n),this.dom.container.empty(),this._buildButtons(this.c.buttons),this},container:function(){return this.dom.container},disable:function(t){return this._indexToButton(t).node.addClass(this.c.dom.button.disabled),this},destroy:function(){b("body").off("keyup."+this.s.namespace);for(var t,n,e=this.s.buttons,o=this.s.subButtons,i=0,s=e.length;i<s;i++)for(this.removePrep(i),t=0,n=o[i].length;t<n;t++)this.removePrep(i+"-"+t);this.removeCommit(),this.dom.container.remove();var r=this.s.dt.settings()[0];for(i=0,s=r.length;i<s;i++)if(r.inst===this){r.splice(i,1);break}return this},enable:function(t,n){return!1===n?this.disable(t):(this._indexToButton(t).node.removeClass(this.c.dom.button.disabled),this)},name:function(){return this.c.name},node:function(t){return this._indexToButton(t).node},removeCommit:function(){for(var t,n,e=this.s.buttons,o=this.s.subButtons,i=e.length-1;0<=i;i--)null===e[i]&&(e.splice(i,1),o.splice(i,1),this.c.buttons.splice(i,1));for(i=0,t=o.length;i<t;i++)for(n=o[i].length-1;0<=n;n--)null===o[i][n]&&(o[i].splice(n,1),this.c.buttons[i].buttons.splice(n,1));return this},removePrep:function(t){var n,e,o=this.s.dt;return"number"==typeof t||-1===t.indexOf("-")?((e=this.s.buttons[+t]).conf.destroy&&e.conf.destroy.call(o.button(t),o,e,e.conf),e.node.remove(),this._removeKey(e.conf),this.s.buttons[+t]=null):(n=t.split("-"),(e=this.s.subButtons[+n[0]][+n[1]]).conf.destroy&&e.conf.destroy.call(o.button(t),o,e,e.conf),e.node.remove(),this._removeKey(e.conf),this.s.subButtons[+n[0]][+n[1]]=null),this},text:function(t,n){function e(t){return"function"==typeof t?t(s,o.node,o.conf):t}var o=this._indexToButton(t),i=this.c.dom.collection.buttonLiner,t=("string"==typeof t&&-1!==t.indexOf("-")&&i&&i.tag?i:this.c.dom.buttonLiner).tag,s=this.s.dt;return n===d?e(o.conf.text):(o.conf.text=n,(t?o.node.children(t):o.node).html(e(n)),this)},toIndex:function(t){for(var n,e,o=this.s.buttons,i=this.s.subButtons,s=0,r=o.length;s<r;s++)if(o[s].node[0]===t)return s+"";for(s=0,r=i.length;s<r;s++)for(n=0,e=i[s].length;n<e;n++)if(i[s][n].node[0]===t)return s+"-"+n},_constructor:function(){var e=this,t=this.s.dt,n=t.settings()[0];n._buttons||(n._buttons=[]),n._buttons.push({inst:this,name:this.c.name}),this._buildButtons(this.c.buttons),t.on("destroy",function(){e.destroy()}),b("body").on("keyup."+this.s.namespace,function(t){var n;u.activeElement&&u.activeElement!==u.body||(n=String.fromCharCode(t.keyCode).toLowerCase(),-1!==e.s.listenKeys.toLowerCase().indexOf(n)&&e._keypress(n,t))})},_addKey:function(t){t.key&&(this.s.listenKeys+=(b.isPlainObject(t.key)?t.key:t).key)},_buildButtons:function(t,n,e){var o=this.s.dt;n||(n=this.dom.container,this.s.buttons=[],this.s.subButtons=[]);for(var i=0,s=t.length;i<s;i++){var r,a,u=this._resolveExtends(t[i]);u&&(b.isArray(u)?this._buildButtons(u,n,e):(a=this._buildButton(u,e!==d))&&(r=a.node,n.append(a.inserter),e===d?(this.s.buttons.push({node:r,conf:u,inserter:a.inserter}),this.s.subButtons.push([])):this.s.subButtons[e].push({node:r,conf:u,inserter:a.inserter}),u.buttons&&(a=this.c.dom.collection,u._collection=b("<"+a.tag+"/>").addClass(a.className),this._buildButtons(u.buttons,u._collection,i)),u.init&&u.init.call(o.button(r),o,r,u)))}},_buildButton:function(n,t){function e(t){return"function"==typeof t?t(a,o,n):t}var o,i=this.c.dom.button,s=this.c.dom.buttonLiner,r=this.c.dom.collection,a=this.s.dt;return t&&r.button&&(i=r.button),t&&r.buttonLiner&&(s=r.buttonLiner),!(n.available&&!n.available(a,n))&&(o=b("<"+i.tag+"/>").addClass(i.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(t){t.preventDefault(),!o.hasClass(i.disabled)&&n.action&&n.action.call(a.button(o),t,a,o,n),o.blur()}).on("keyup.dtb",function(t){13===t.keyCode&&!o.hasClass(i.disabled)&&n.action&&n.action.call(a.button(o),t,a,o,n)}),s.tag?o.append(b("<"+s.tag+"/>").html(e(n.text)).addClass(s.className)):o.html(e(n.text)),!1===n.enabled&&o.addClass(i.disabled),n.className&&o.addClass(n.className),n.titleAttr&&o.attr("title",n.titleAttr),n.namespace||(n.namespace=".dt-button-"+l++),r=(t=this.c.dom.buttonContainer)?b("<"+t.tag+"/>").addClass(t.className).append(o):o,this._addKey(n),{node:o,inserter:r})},_indexToButton:function(t){return"number"==typeof t||-1===t.indexOf("-")?this.s.buttons[+t]:(t=t.split("-"),this.s.subButtons[+t[0]][+t[1]])},_keypress:function(e,o){for(var t,n,i=this.s.buttons,s=this.s.subButtons,r=function(t,n){!t.key||t.key!==e&&(!b.isPlainObject(t.key)||t.key.key!==e||t.key.shiftKey&&!o.shiftKey||t.key.altKey&&!o.altKey||t.key.ctrlKey&&!o.ctrlKey||t.key.metaKey&&!o.metaKey)||n.click()},a=0,u=i.length;a<u;a++)r(i[a].conf,i[a].node);for(a=0,u=s.length;a<u;a++)for(t=0,n=s[a].length;t<n;t++)r(s[a][t].conf,s[a][t].node)},_removeKey:function(t){var n;t.key&&(t=(b.isPlainObject(t.key)?t.key:t).key,n=this.s.listenKeys.split(""),t=b.inArray(t,n),n.splice(t,1),this.s.listenKeys=n.join(""))},_resolveExtends:function(e){function t(t){for(var n=0;!b.isPlainObject(t)&&!b.isArray(t);){if(t===d)return;if("function"==typeof t){if(!(t=t(i,e)))return!1}else if("string"==typeof t){if(!f[t])throw"Unknown button type: "+t;t=f[t]}if(30<++n)throw"Buttons: Too many iterations"}return b.isArray(t)?t:b.extend({},t)}var n,o,i=this.s.dt;for(e=t(e);e&&e.extend;){if(!f[e.extend])throw"Cannot extend unknown button type: "+e.extend;var s=t(f[e.extend]);if(b.isArray(s))return s;if(!s)return!1;var r=s.className,a=(e=b.extend({},s,e),r&&e.className!==r&&(e.className=r+" "+e.className),e.postfixButtons);if(a){for(e.buttons||(e.buttons=[]),n=0,o=a.length;n<o;n++)e.buttons.push(a[n]);e.postfixButtons=null}var u=e.prefixButtons;if(u){for(e.buttons||(e.buttons=[]),n=0,o=u.length;n<o;n++)e.buttons.splice(n,0,u[n]);e.prefixButtons=null}e.extend=s.extend}return e}}),c.background=function(t,n,e){e===d&&(e=400),t?b("<div/>").addClass(n).css("display","none").appendTo("body").fadeIn(e):b("body > div."+n).fadeOut(e,function(){b(this).remove()})},c.instanceSelector=function(t,i){var s,r,a;return t?(s=[],r=b.map(i,function(t){return t.name}),(a=function(t){var n;if(b.isArray(t))for(var e=0,o=t.length;e<o;e++)a(t[e]);else"string"==typeof t?-1!==t.indexOf(",")?a(t.split(",")):-1!==(n=b.inArray(b.trim(t),r))&&s.push(i[n].inst):"number"==typeof t&&s.push(i[t].inst)})(t),s):b.map(i,function(t){return t.inst})},c.buttonSelector=function(t,n){for(var c=[],l=function(t,n){var e,o=[],i=(b.each(n.s.buttons,function(t,n){null!==n&&o.push({node:n.node[0],name:n.conf.name})}),b.each(n.s.subButtons,function(t,n){b.each(n,function(t,n){null!==n&&o.push({node:n.node[0],name:n.conf.name})})}),b.map(o,function(t){return t.node}));if(b.isArray(t)||t instanceof b)for(r=0,a=t.length;r<a;r++)l(t[r],n);else if(null===t||t===d||"*"===t)for(r=0,a=o.length;r<a;r++)c.push({inst:n,idx:n.toIndex(o[r].node)});else if("number"==typeof t)c.push({inst:n,idx:t});else if("string"==typeof t)if(-1!==t.indexOf(","))for(var s=t.split(","),r=0,a=s.length;r<a;r++)l(b.trim(s[r]),n);else if(t.match(/^\d+(\-\d+)?$/))c.push({inst:n,idx:t});else if(-1!==t.indexOf(":name")){var u=t.replace(":name","");for(r=0,a=o.length;r<a;r++)o[r].name===u&&c.push({inst:n,idx:n.toIndex(o[r].node)})}else b(i).filter(t).each(function(){c.push({inst:n,idx:n.toIndex(this)})});else"object"!=typeof t||!t.nodeName||-1!==(e=b.inArray(t,i))&&c.push({inst:n,idx:n.toIndex(i[e])})},e=0,o=t.length;e<o;e++){var i=t[e];l(n,i)}return c},c.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},c.version="1.1.1-dev",b.extend(f,{collection:{text:function(t,n,e){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(t,n,e,o){var i=e.offset(),n=b(n.table().container()),s=!1,r=(b("div.dt-button-background").length&&(s=b("div.dt-button-collection").offset(),b(u).trigger("click.dtb-collection")),o._collection.addClass(o.collectionLayout).css("display","none").appendTo("body").fadeIn(o.fade),o._collection.css("position"));s&&"absolute"===r?o._collection.css({top:s.top+5,left:s.left+5}):"absolute"===r?(o._collection.css({top:i.top+e.outerHeight(),left:i.left}),s=i.left+o._collection.outerWidth(),(r=n.offset().left+n.width())<s&&o._collection.css("left",i.left-(s-r))):((e=o._collection.height()/2)>b(a).height()/2&&(e=b(a).height()/2),o._collection.css("marginTop",-1*e)),o.background&&c.background(!0,o.backgroundClassName,o.fade),setTimeout(function(){b("div.dt-button-background").on("click.dtb-collection",function(){}),b("body").on("click.dtb-collection",function(t){b(t.target).parents().andSelf().filter(o._collection).length||(o._collection.fadeOut(o.fade,function(){o._collection.detach()}),b("div.dt-button-background").off("click.dtb-collection"),c.background(!1,o.backgroundClassName,o.fade),b("body").off("click.dtb-collection"))})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",fade:400},copy:function(t,n){return f.copyHtml5?"copyHtml5":f.copyFlash&&f.copyFlash.available(t,n)?"copyFlash":void 0},csv:function(t,n){return f.csvHtml5&&f.csvHtml5.available(t,n)?"csvHtml5":f.csvFlash&&f.csvFlash.available(t,n)?"csvFlash":void 0},excel:function(t,n){return f.excelHtml5&&f.excelHtml5.available(t,n)?"excelHtml5":f.excelFlash&&f.excelFlash.available(t,n)?"excelFlash":void 0},pdf:function(t,n){return f.pdfHtml5&&f.pdfHtml5.available(t,n)?"pdfHtml5":f.pdfFlash&&f.pdfFlash.available(t,n)?"pdfFlash":void 0},pageLength:function(t,n){function i(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())}var t=t.settings()[0].aLengthMenu,e=b.isArray(t[0])?t[0]:t,o=b.isArray(t[0])?t[1]:t;return{extend:"collection",text:i,className:"buttons-page-length",buttons:b.map(e,function(s,t){return{text:o[t],action:function(t,n,e,o){n.page.len(s).draw(),b("div.dt-button-background").click()},init:function(t,n,e){function o(){i.active(t.page.len()===s)}var i=this;t.on("length.dt"+e.namespace,o),o()},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}),init:function(t,n,e){var o=this;t.on("length.dt"+e.namespace,function(){o.text(i(t))})},destroy:function(t,n,e){t.off("length.dt"+e.namespace)}}}}),o.Api.register("buttons()",function(n,e){return e===d&&(e=n,n=d),this.iterator(!0,"table",function(t){if(t._buttons)return c.buttonSelector(c.instanceSelector(n,t._buttons),e)},!0)}),o.Api.register("button()",function(t,n){t=this.buttons(t,n);return 1<t.length&&t.splice(1,t.length),t}),o.Api.register(["buttons().active()","button().active()"],function(n){return this.each(function(t){t.inst.active(t.idx,n)})}),o.Api.registerPlural("buttons().action()","button().action()",function(n){return n===d?this.map(function(t){return t.inst.action(t.idx)}):this.each(function(t){t.inst.action(t.idx,n)})}),o.Api.register(["buttons().enable()","button().enable()"],function(n){return this.each(function(t){t.inst.enable(t.idx,n)})}),o.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(t){t.inst.disable(t.idx)})}),o.Api.registerPlural("buttons().nodes()","button().node()",function(){var n=b();return b(this.each(function(t){n=n.add(t.inst.node(t.idx))})),n}),o.Api.registerPlural("buttons().text()","button().text()",function(n){return n===d?this.map(function(t){return t.inst.text(t.idx)}):this.each(function(t){t.inst.text(t.idx,n)})}),o.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(t){t.inst.node(t.idx).trigger("click")})}),o.Api.registerPlural("buttons().containers()","buttons().container()",function(){var n=b();return b(this.each(function(t){n=n.add(t.inst.container())})),n}),o.Api.register("button().add()",function(t,n){return 1===this.length&&this[0].inst.add(t,n),this.button(t)}),o.Api.register("buttons().destroy()",function(t){return this.pluck("inst").unique().each(function(t){t.destroy()}),this}),o.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(t){t.inst.removePrep(t.idx)}),this.pluck("inst").unique().each(function(t){t.removeCommit()}),this}),o.Api.register("buttons.info()",function(t,n,e){var o=this;return!1===t?(b("#datatables_buttons_info").fadeOut(function(){b(this).remove()}),clearTimeout(i),i=null):(i&&clearTimeout(i),b("#datatables_buttons_info").length&&b("#datatables_buttons_info").remove(),t=t?"<h2>"+t+"</h2>":"",b('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t).append(b("<div/>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body").fadeIn(),e!==d&&0!==e&&(i=setTimeout(function(){o.buttons.info(!1)},e))),this}),o.Api.register("buttons.exportData()",function(t){if(this.context.length)return n(new o.Api(this.context[0]),t)}),b("<textarea/>")[0]),n=function(o,t){for(var i=b.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(t){return n(t)},footer:function(t){return n(t)},body:function(t){return n(t)}}},t),n=function(t){return"string"==typeof t&&(i.stripHtml&&(t=t.replace(/<.*?>/g,"")),i.trim&&(t=t.replace(/^\s+|\s+$/g,"")),i.stripNewlines&&(t=t.replace(/\n/g," ")),i.decodeEntities&&(p.innerHTML=t,t=p.value)),t},t=o.columns(i.columns).indexes().map(function(t,n){return i.format.header(o.column(t).header().innerHTML,t)}).toArray(),e=o.table().footer()?o.columns(i.columns).indexes().map(function(t,n){var e=o.column(t).footer();return i.format.footer(e?e.innerHTML:"",t)}).toArray():null,s=o.rows(i.rows,i.modifier).indexes().toArray(),r=o.cells(s,i.columns).render(i.orthogonal).toArray(),a=t.length,s=0<a?r.length/a:0,u=new Array(s),c=0,l=0,d=s;l<d;l++){for(var f=new Array(a),h=0;h<a;h++)f[h]=i.format.body(r[c],h,l),c++;u[l]=f}return{header:t,footer:e,body:u}};return b.fn.dataTable.Buttons=c,b.fn.DataTable.Buttons=c,b(u).on("init.dt plugin-init.dt",function(t,n,e){"dt"===t.namespace&&(t=n.oInit.buttons||o.defaults.buttons)&&!n._buttons&&new c(n,t).container()}),o.ext.feature.push({fnInit:function(t){var t=new o.Api(t),n=t.init().buttons||o.defaults.buttons;return new c(t,n).container()},cFeature:"B"}),c});